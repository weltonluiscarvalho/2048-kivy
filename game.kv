GameScreenManager:
    BoardScreen:
        MDRelativeLayout:
            MDCard:
                id: score_card
                md_bg_color: '#6e512d'
                size_hint: .24, None
                height: self.width
                pos_hint: {'x': .03, 'top': .98}
                MDRelativeLayout:
                    MDLabel:
                        id: score_label
                        text: 'SCORE'
                        adaptive_size: True
                        font_style: "H6"
                        halign: "center"
                        color: "white"
                        pos_hint: {'top': .9, 'center_x': .5}
                        bold: True
                    MDLabel:
                        id: score_value
                        text: str(board.score)
                        adaptive_size: True
                        font_style: "H5"
                        halign: "center"
                        color: "white"
                        pos_hint: {'y': .15, 'center_x': .5}
                        bold: True
            MDCard:
                md_bg_color: '#6e512d'
                size_hint: .24, None
                height: self.width / 2
                pos_hint: {'x': .03, 'top': .83}
                MDRelativeLayout:
                    MDIconButton:
                        icon: "home"
                        pos_hint:{'center_x': .5, 'center_y': .5 }
                        theme_icon_color: 'Custom'
                        icon_color: "white"
                        icon_size: '35sp'
            MDCard:
                md_bg_color: '#DFB115'
                size_hint: .38, None
                height: self.width
                pos_hint: {'center_x': .5, 'top': .98}
                MDRelativeLayout:
                    MDLabel:
                        id: label
                        text: 'MEME'
                        adaptive_size: True
                        font_style: "H4"
                        color: "white"
                        pos_hint: {'center_y': .70, 'center_x': .5}
                        bold: True
                    MDLabel:
                        id: label
                        text: '2048'
                        adaptive_size: True
                        font_style: "H3"
                        color: "white"
                        pos_hint: {'center_y': .40, 'center_x': .5}
                        bold: True

            MDCard:
                md_bg_color: '#6e512d'
                size_hint: .24, None
                height: self.width
                pos_hint: {'right': .97, 'top': .98}
                MDRelativeLayout:
                    MDLabel:
                        id: best_label
                        text: 'BEST'
                        adaptive_size: True
                        font_style: "H6"
                        color: "white"
                        pos_hint: {'top': .9, 'center_x': .5}
                        bold: True
                    MDLabel:
                        id: best_value
                        text: str(board.best)
                        adaptive_size: True
                        font_style: "H5"
                        halign: "center"
                        color: "white"
                        pos_hint: {'y': .15, 'center_x': .5}
                        bold: True
            MDCard:
                md_bg_color: '#6e512d'
                size_hint: .24, None
                height: self.width / 2
                pos_hint: {'right': .97, 'top': .83}
                MDRelativeLayout:
                    MDIconButton:
                        icon: "cog"
                        pos_hint:{'center_x': .5, 'center_y': .5 }
                        theme_icon_color: 'Custom'
                        icon_color: "white"
                        icon_size: '35sp'

            MDFloatingActionButton:
                icon: "undo"
                # text: "undo"
                adaptive_size: True
                size_hint:.1,None
                height: self.width
                type: "standard"
                pos_hint: {"center_x": .5, "center_y": .7}
                theme_icon_color: "Custom"
                md_bg_color: "#e6d7b1"
                text_color: "#6e512d"
                line_color: "black"
                on_release: board.undo_move()

            Board:
                id: board
                pos_hint: {"center_x": .5, "center_y": .4}
                size_hint: .80, None
                height: self.width
                canvas.before:
                    Color:
                        rgb: 150/255,150/255,150/255
                    Rectangle:
                        pos: -self.height * .0075, -self.width * .0075
                        size: self.width * 1.015, self.width * 1.015
                canvas:
                    Color:
                        rgba: .70, .70, .70, 1
                    Rectangle:
                        size: self.width, self.width

<Piece>
    canvas.before:
        Color:
            rgb: self.color_bg
        RoundedRectangle:
            pos: self.x + self.height * .03, self.y + self.width * .03
            size: self.width * .94, self.height * .94
            radius: [8]
    font_size: "30sp"
    bold: True
    font: 'clear-sans'


<PositionRectangle>
    size_hint: .25, .25 
    canvas.before:
        Color:
            rgb: 150/255,150/255,150/255
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgb: 180/255,180/255,180/255
        RoundedRectangle:
            pos: self.x + self.height * .03, self.y + self.width * .03
            size: self.width * .94, self.height * .94
            radius: [8]


<GameOverPopup>
    id: game_over_popup
    size_hint: 1, 1
    background_color: 0, 0, 0, .5

    MDRelativeLayout:
        MDLabel:
            text: "You Lose"
            halign: 'center'
            font_style: "H2"
            pos_hint: {'center_x': .5, 'center_y': .7}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1

        MDLabel:
            text: f'score {game_over_popup.score}'
            halign: "center"
            font_style: "H3"
            pos_hint: {'center_x': .5, 'center_y': .6}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1

        MDFloatingActionButton:
            id: undo_button
            icon: "undo"
            adaptive_size: True
            size_hint:.1,None
            height: self.width
            type: "standard"
            pos_hint: {"center_x": .5, "center_y": .24}
            theme_icon_color: "Custom"
            md_bg_color: "#e6d7b1"
            text_color: "#6e512d"
            line_color: "black"
            # on_release: board.undo_move()

        MDRaisedButton:
            id: new_game_button
            text: "New Game"
            pos_hint: {'center_x': .5, 'center_y': .17}
            anchor_y: 'bottom'
            theme_icon_color: "Custom"
            md_bg_color: "#e6d7b1"
            text_color: "#6e512d"

        MDRaisedButton:
            id: quit_game_button
            text: "Quit"
            pos_hint: {'center_x': .5, 'center_y': .1}
            anchor_y: 'bottom'
            theme_icon_color: "Custom"
            md_bg_color: "#e6d7b1"
            text_color: "#6e512d"
